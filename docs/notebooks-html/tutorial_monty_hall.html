<div id="ipython-notebook">
            <div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="An-Interactive-Monty-Hall-Simulation">An Interactive Monty Hall Simulation<a class="anchor-link" href="#An-Interactive-Monty-Hall-Simulation">¶</a></h1></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>nbinteract</code> was designed to make interactive explanations easy to create. In this tutorial, we will show the process of writing a simulation from scratch and visualizing the results interactively.</p>
<p>In this section, you will create an interactive simulation of the Monty Hall Problem. You may continue writing code in the notebook from the previous section or create a new one for this section.</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-Monty-Hall-Problem">The Monty Hall Problem<a class="anchor-link" href="#The-Monty-Hall-Problem">¶</a></h2><p>The Monty Hall Problem (<a href="https://en.wikipedia.org/wiki/Monty_Hall_problem">Wikipedia</a>) is a famous probability problem that has stumped many, mathematicians included. The problem goes something like this:</p>
<blockquote><p>Suppose you're on a game show, and you're given the choice of three doors: Behind one door is a car; behind the others, goats. You pick a door, say No. 1, and the host, who knows what's behind the doors, opens another door, say No. 3, which has a goat. He then says to you, "Do you want to switch your choice to door No. 2?" Is it to your advantage to switch your choice?</p>
</blockquote>
<p>Perhaps unintuitively, you will win the prize about twice as often if you switch doors. We can show this through simulation.</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Simulating-a-Game">Simulating a Game<a class="anchor-link" href="#Simulating-a-Game">¶</a></h3></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One way to write an interactive explanation is to write functions and create interactions for each one as applicable. Composing the functions allows you to create more complicated processes. <code>nbinteract</code> also provides tools for interactive visualizations as we will soon see.</p>
<p>Let's start with defining a function to simulate one round of the Monty Hall Problem.</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="k">import</span> <span class="n">interact</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">PRIZES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Car'</span><span class="p">,</span> <span class="s1">'Goat 1'</span><span class="p">,</span> <span class="s1">'Goat 2'</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">monty_hall</span><span class="p">(</span><span class="n">example_num</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Simulates one round of the Monty Hall Problem. Outputs a tuple of</span>
<span class="sd">    (result if stay, result if switch, result behind opened door) where</span>
<span class="sd">    each results is one of PRIZES.</span>
<span class="sd">    '''</span>
    <span class="n">pick</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">PRIZES</span><span class="p">)</span>
    <span class="n">opened</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
        <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">PRIZES</span> <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">pick</span> <span class="ow">and</span> <span class="n">p</span> <span class="o">!=</span> <span class="s1">'Car'</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">remainder</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">PRIZES</span> <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">pick</span> <span class="ow">and</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">opened</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">pick</span><span class="p">,</span> <span class="n">remainder</span><span class="p">,</span> <span class="n">opened</span><span class="p">)</span>
</pre></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the <code>example_num</code> argument is passed in but not used in the <code>monty_hall</code> function. Although it's unneeded for the function, it is easier to use <code>interact</code> to call functions when they have arguments to manipulate:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">interact</span><span class="p">(</span><span class="n">monty_hall</span><span class="p">,</span> <span class="n">example_num</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="64960f40-31d7-493c-93aa-00f46d0092e3"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#64960f40-31d7-493c-93aa-00f46d0092e3');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "c5e6a0d54c284bf58b495ca065796e9e"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By interacting with the function above, we are able to informally verify that the function never allows the host to open a door with a car behind it. Even though the function is random we are able to use interaction to examine its long-term behavior!</p>
<p>We'll continue by defining a function to simulate a game of Monty Hall and output the winning strategy for that game:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">winner</span><span class="p">(</span><span class="n">example_num</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Plays a game of Monty Hall. If staying with the original door wins</span>
<span class="sd">    a car, return 'stay'. Otherwise, the remaining door contains the car</span>
<span class="sd">    so 'switch' would have won.</span>
<span class="sd">    '''</span>
    <span class="n">picked</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">monty_hall</span><span class="p">()</span>
    <span class="k">return</span> <span class="s1">'stay'</span> <span class="k">if</span> <span class="n">picked</span> <span class="o">==</span> <span class="s1">'Car'</span> <span class="k">else</span> <span class="s1">'switch'</span>

<span class="n">interact</span><span class="p">(</span><span class="n">winner</span><span class="p">,</span> <span class="n">example_num</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="7aaed2ef-b003-460b-a7c7-ebaaa97d7276"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#7aaed2ef-b003-460b-a7c7-ebaaa97d7276');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "5b9416e29c9a454b99532a34cee337a2"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Again, a bit of interaction lets us quickly examine the behavior of <code>winner</code>. We can see that <code>switch</code> appears more often than <code>stay</code>.</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Brief-Introduction-to-Plotting-with-nbinteract">Brief Introduction to Plotting with <code>nbinteract</code><a class="anchor-link" href="#Brief-Introduction-to-Plotting-with-nbinteract">¶</a></h3></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's create an interactive bar chart of the number of times each strategy wins. We'll use <code>nbinteract</code>'s plotting functionality.</p>
<p><code>nbi.bar</code> creates a bar chart:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">nbinteract</span> <span class="k">as</span> <span class="nn">nbi</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="e35f309c-81c8-4f29-b2fb-5c91dd7076a2"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#e35f309c-81c8-4f29-b2fb-5c91dd7076a2');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "5d3d0f0b05704b4b8dfccba5a9bca689"}
</script></div></div>

<div class="output_area">







 
 
<div id="b31cbb9d-ba80-4b49-ba17-fcaabefe9b15"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#b31cbb9d-ba80-4b49-ba17-fcaabefe9b15');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "32006a31427b488cb3c7bc0b603ae875"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To make an interactive chart, pass a response function in place of one or both of <code>bar</code>'s arguments.</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># This function generates the x-values</span>
<span class="k">def</span> <span class="nf">categories</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'abcdefg'</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>

<span class="c1"># This function generates the y-values (heights of bars)</span>
<span class="c1"># The y response function always takes in the x-values as its</span>
<span class="c1"># first argument</span>
<span class="k">def</span> <span class="nf">offset_y</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
    <span class="n">num_categories</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">num_categories</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>

<span class="c1"># Each argument of the response functions is passed in as a keyword</span>
<span class="c1"># argument to `nbi.bar` in the same format as `interact`</span>
<span class="n">nbi</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">offset_y</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="715d658d-4dc0-4d3c-bc86-346a5d66ad88"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#715d658d-4dc0-4d3c-bc86-346a5d66ad88');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "a905282587e348e8b5a568684d406987"}
</script></div></div>

<div class="output_area">







 
 
<div id="8e792b8d-7ce9-4dbf-a10f-b0205807c3e9"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#8e792b8d-7ce9-4dbf-a10f-b0205807c3e9');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "7c9d74eeea844344b460d1d1059d491f"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Visualizing-the-Winners">Visualizing the Winners<a class="anchor-link" href="#Visualizing-the-Winners">¶</a></h3></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, let's turn back to our original goal: plotting the winners as games are played.</p>
<p>We can call <code>winner</code> many times and use <code>nbi.bar</code> to show the bar chart as it's built over the trials.</p>
<p>Note that we compute the results before defining our function <code>won</code>. This has two benefits over running the simulation directly in <code>won</code>:</p>
<ol>
<li>It gives us consistency in our interaction. If we run a random simulation in <code>won</code>, moving the slider from 500 to a different number back to 500 will give us a slightly different bar chart.</li>
<li>It makes the interaction smoother since less work is being done each time the slider is moved.</li>
</ol></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'stay'</span><span class="p">,</span> <span class="s1">'switch'</span><span class="p">]</span>

<span class="n">winners</span> <span class="o">=</span> <span class="p">[</span><span class="n">winner</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)]</span>

<span class="c1"># Note that the the first argument to the y response function</span>
<span class="c1"># will be the x-values which we don't need</span>
<span class="k">def</span> <span class="nf">won</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">num_games</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Outputs a 2-tuple of the number of times each strategy won</span>
<span class="sd">    after num_games games.</span>
<span class="sd">    '''</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">winners</span><span class="p">[:</span><span class="n">num_games</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">'stay'</span><span class="p">),</span>
            <span class="n">winners</span><span class="p">[:</span><span class="n">num_games</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">'switch'</span><span class="p">))</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">won</span><span class="p">,</span> <span class="n">num_games</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="2974de4b-67ae-4587-a25c-28500b3703ca"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#2974de4b-67ae-4587-a25c-28500b3703ca');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "d5bd0d85bcdb48d9991ee8e8c1fd29f5"}
</script></div></div>

<div class="output_area">







 
 
<div id="92c3d4ee-a82a-47a0-8dd1-edbfa845078b"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#92c3d4ee-a82a-47a0-8dd1-edbfa845078b');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "1c0063be3e294cc384df466a07a79b17"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that by default the plot will adjust its y-axis to match the limits of the data. We can manually set the y-axis limits to better visualize this plot being built up. We will also add labels to our plot:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Number of times each strategy wins'</span><span class="p">,</span>
    <span class="s1">'xlabel'</span><span class="p">:</span> <span class="s1">'Strategy'</span><span class="p">,</span>
    <span class="s1">'ylabel'</span><span class="p">:</span> <span class="s1">'Number of wins'</span><span class="p">,</span>
    <span class="s1">'ylim'</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">700</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">won</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">num_games</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="89b5351b-9c87-4001-a7d3-817823c551c3"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#89b5351b-9c87-4001-a7d3-817823c551c3');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "37e54e39e03d4193b8693ec8e97d6ddb"}
</script></div></div>

<div class="output_area">







 
 
<div id="3e69c3a7-dbd3-4b57-b578-30515fb4ff8a"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#3e69c3a7-dbd3-4b57-b578-30515fb4ff8a');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "501d819d59ef4c2e8b6ad4e5afbdc506"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can get even fancy and use the <a href="http://ipywidgets.readthedocs.io/en/stable/examples/Widget%20List.html#Play-(Animation)-widget"><code>Play</code> widget</a> from <code>ipywidgets</code> to animate the plot.</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="k">import</span> <span class="n">Play</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">won</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
        <span class="n">num_games</span><span class="o">=</span><span class="n">Play</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="4193b13f-3f34-4faf-b57b-99d5f4845fe4"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#4193b13f-3f34-4faf-b57b-99d5f4845fe4');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "d224b5a96e3d41f2b600ac495854a58a"}
</script></div></div>

<div class="output_area">







 
 
<div id="46d840a4-c2d1-440d-b07a-a534f3884215"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#46d840a4-c2d1-440d-b07a-a534f3884215');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "c96635f0586e4984bf7eea138923095e"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we have an interactive, animated bar plot showing the distribution of wins over time for both Monty Hall strategies. This is a convincing argument that switching is better than staying. In fact, the bar plot above suggests that switching is about twice as likely to win as staying!</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Simulating-Sets-of-Games">Simulating Sets of Games<a class="anchor-link" href="#Simulating-Sets-of-Games">¶</a></h3></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Is switching actually twice as likely to win? We can again use simulation to answer this question by simulating sets of 50 games at a time. recording the proportion of times <code>switch</code> wins.</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">prop_wins</span><span class="p">(</span><span class="n">sample_size</span><span class="p">):</span>
    <span class="sd">'''Returns proportion of times switching wins after sample_size games.'''</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">winner</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'switch'</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sample_size</span><span class="p">))</span> <span class="o">/</span> <span class="n">sample_size</span>

<span class="n">interact</span><span class="p">(</span><span class="n">prop_wins</span><span class="p">,</span> <span class="n">sample_size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="c0280450-c5fd-4b01-8a64-7711568e3cac"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#c0280450-c5fd-4b01-8a64-7711568e3cac');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "753c7df38aaa4c5f8dafe42d4aa61266"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can then define a function to play sets of games and generate a list of win proportions for each set:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">generate_proportions</span><span class="p">(</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">repetitions</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Returns an array of length reptitions. Each element in the list is the</span>
<span class="sd">    proportion of times switching won in sample_size games.</span>
<span class="sd">    '''</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">prop_wins</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">repetitions</span><span class="p">)])</span>

<span class="n">interact</span><span class="p">(</span><span class="n">generate_proportions</span><span class="p">,</span> <span class="n">sample_size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">repetitions</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="64313533-6c88-467c-a0da-e10d656b8e67"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#64313533-6c88-467c-a0da-e10d656b8e67');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "feb1e19a4bb94529a5a6996d5b80e35b"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Interacting with <code>generate_proportions</code> shows the relationship between its arguments <code>sample_size</code> and <code>repetitions</code> more quickly than reading the function itself!</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Visualizing-Proportions">Visualizing Proportions<a class="anchor-link" href="#Visualizing-Proportions">¶</a></h3></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can then use <code>nbi.hist</code> to show these proportions being computed over runs.</p>
<p>Again, we pre-compute the simulations and interact with a function that takes a slice of the simulations to make the interaction faster.</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Play the game 10 times, recording the proportion of times switching wins.</span>
<span class="c1"># Repeat 100 times to record 100 proportions</span>
<span class="n">proportions</span> <span class="o">=</span> <span class="n">generate_proportions</span><span class="p">(</span><span class="n">sample_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">repetitions</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">props_up_to</span><span class="p">(</span><span class="n">num_sets</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">proportions</span><span class="p">[:</span><span class="n">num_sets</span><span class="p">]</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">props_up_to</span><span class="p">,</span> <span class="n">num_sets</span><span class="o">=</span><span class="n">Play</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="e1bb8b7a-9a59-4f8f-a93b-4a018352a51d"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#e1bb8b7a-9a59-4f8f-a93b-4a018352a51d');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "dfd320bbc3cb4a70bc608c64edd70865"}
</script></div></div>

<div class="output_area">







 
 
<div id="f8123d5d-a58d-4beb-aad8-93b5ef5e4be7"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#f8123d5d-a58d-4beb-aad8-93b5ef5e4be7');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "e555f4af647942c3894736149d310d00"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As with last time, it's illustrative to specify the limits of the axes:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Distribution of win proportion over 100 sets of 10 games when switching'</span><span class="p">,</span>
    <span class="s1">'xlabel'</span><span class="p">:</span> <span class="s1">'Proportions'</span><span class="p">,</span>
    <span class="s1">'ylabel'</span><span class="p">:</span> <span class="s1">'Count'</span><span class="p">,</span>
    <span class="s1">'xlim'</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s1">'ylim'</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">props_up_to</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">num_sets</span><span class="o">=</span><span class="n">Play</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="b161e566-3558-4d4b-bf4a-37ee2d1f04f1"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#b161e566-3558-4d4b-bf4a-37ee2d1f04f1');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "cb23c6c4cf3645c5940fb76f47b895ef"}
</script></div></div>

<div class="output_area">







 
 
<div id="27b06e05-51e3-4083-8c8a-a962d26fac5d"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#27b06e05-51e3-4083-8c8a-a962d26fac5d');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "6152a82e34e9469fac6581cface2e7d6"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the distribution of wins is centered at roughly 0.66 but the distribution almost spans the entire x-axis. Will increasing the sample size make our distribution more narrow? Will increasing repetitions do the trick? Or both? We can find out through simulation and interaction.</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll start with increasing the sample size:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">varying_sample_size</span> <span class="o">=</span> <span class="p">[</span><span class="n">generate_proportions</span><span class="p">(</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">repetitions</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">sample_size</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">101</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">props_for_sample_size</span><span class="p">(</span><span class="n">sample_size</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">varying_sample_size</span><span class="p">[</span><span class="n">sample_size</span> <span class="o">-</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">changed_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Distribution of win proportions as sample size increases'</span><span class="p">,</span>
    <span class="s1">'ylim'</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">props_for_sample_size</span><span class="p">,</span>
         <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="o">**</span><span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">changed_options</span><span class="p">},</span>
         <span class="n">sample_size</span><span class="o">=</span><span class="n">Play</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">50</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="0487feb8-f972-49c3-ac23-4c8c7db601c1"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#0487feb8-f972-49c3-ac23-4c8c7db601c1');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "9b94d488171445c0bb6448ea7135b076"}
</script></div></div>

<div class="output_area">







 
 
<div id="82b0f1fa-fe9f-4bfc-a4c8-7f0601ed7bac"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#82b0f1fa-fe9f-4bfc-a4c8-7f0601ed7bac');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "935e814bc11f4ddfb03e619088de2f13"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So increasing the sample size makes the distribution narrower. We can now see more clearly that the distribution is centered at 0.66.</p>
<p>We can repeat the process for the number of repetitions:</p></div></div></div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">varying_reps</span> <span class="o">=</span> <span class="p">[</span><span class="n">generate_proportions</span><span class="p">(</span><span class="n">sample_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">repetitions</span><span class="o">=</span><span class="n">reps</span><span class="p">)</span> <span class="k">for</span> <span class="n">reps</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">101</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">props_for_reps</span><span class="p">(</span><span class="n">reps</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">varying_reps</span><span class="p">[</span><span class="n">reps</span> <span class="o">-</span> <span class="mi">10</span><span class="p">]</span>

<span class="n">changed_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Distribution of win proportions as repetitions increase'</span><span class="p">,</span>
    <span class="s1">'ylim'</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">nbi</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">props_for_reps</span><span class="p">,</span>
         <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="o">**</span><span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">changed_options</span><span class="p">},</span>
         <span class="n">reps</span><span class="o">=</span><span class="n">Play</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">50</span><span class="p">))</span>
</pre></div></div></div></div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">







 
 
<div id="a53aefcc-013f-4f31-b9d5-987acfc3f361"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#a53aefcc-013f-4f31-b9d5-987acfc3f361');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "c45916126f1d4c2b93110651676a00ac"}
</script></div></div>

<div class="output_area">







 
 
<div id="2398589b-c80b-4e24-bf9d-084b7af89fa4"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#2398589b-c80b-4e24-bf9d-084b7af89fa4');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"version_minor": 0, "version_major": 2, "model_id": "81058334e3314d748c1f5debb7a7732f"}
</script></div></div></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our distribution gets taller as the number of repetitions increases since we have more proportions to plot. However, the spread of the distribution remains the same.</p>
<p>Through simulation, we've shown that increasing the sample size but not repetitions causes our distribution of proportions to become more narrowly distributed.</p>
<p>In particular increasing the sample size shows that our distribution is centered at 0.66. This implies that the probability of winning the Monty Hall game when switching is around 0.66, and thus the probability of winning the Monty Hall game when staying is around 0.33.</p></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conclusion">Conclusion<a class="anchor-link" href="#Conclusion">¶</a></h2></div></div></div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Through this extended example, we've shown how interaction and visualization can help explore ideas and convincingly explain concepts. Congrats on making it through the tutorial! Let's now publish your results to the web.</p>
<p>Like the previous section of the tutorial, you may simply paste this code in a cell (replace <code>tutorial.ipynb</code> with the name of your notebook if needed):</p>

<pre><code>nbi.publish('tutorial.ipynb')

</code></pre>
<p>And it will output a link to download an HTML file.</p>
<p>You may now open your GitHub repo and upload your HTML file by dragging onto the page. Commit your changes, and you now have an interactive explanation of the Monty Hall problem to show the world!</p></div></div></div>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$']],
      processEscapes: true
    }
  });
</script></div>